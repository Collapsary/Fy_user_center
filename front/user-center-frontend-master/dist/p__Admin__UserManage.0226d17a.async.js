(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[210],{43819:function(z,I,t){"use strict";t.r(I);var A=t(11849),Z=t(57337),E=t(90636),T=t(3182),G=t(57663),g=t(71577),H=t(34792),f=t(48086),J=t(71153),j=t(60331),Q=t(49111),K=t(19650),N=t(94233),W=t(51890),C=t(67294),L=t(82456),M=t(93387),S=t(89366),F=t(95357),k=t(8212),$=t(73171),a=t(85893),x=function(h,m){return[{dataIndex:"id",valueType:"indexBorder",width:48},{title:"\u7528\u6237\u4FE1\u606F",dataIndex:"username",render:function(c,r){return(0,a.jsxs)(K.Z,{children:[(0,a.jsx)(W.C,{src:r.avatarUrl,icon:(0,a.jsx)(S.Z,{}),size:40}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{style:{fontWeight:"bold"},children:r.username}),(0,a.jsx)("div",{style:{color:"#666",fontSize:"12px"},children:r.userAccount})]})]})},copyable:!0,editable:function(c,r){return h||r.id===m}},{title:"\u6027\u522B",dataIndex:"gender",render:function(c,r){return r.gender===null||r.gender===void 0?(0,a.jsx)(j.Z,{color:"default",children:"\u5F85\u7528\u6237\u8BBE\u7F6E"}):(0,a.jsx)(j.Z,{color:r.gender===1?"blue":"pink",children:r.gender===1?"\u7537":"\u5973"})},editable:function(c,r){return h||r.id===m}},{title:"\u8054\u7CFB\u65B9\u5F0F",dataIndex:"phone",render:function(c,r){return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{children:r.phone}),(0,a.jsx)("div",{style:{color:"#666",fontSize:"12px"},children:r.email})]})},copyable:!0,editable:function(c,r){return h||r.id===m}},{title:"\u72B6\u6001",dataIndex:"userStatus",render:function(c,r){return(0,a.jsx)(j.Z,{color:r.userStatus===0?"green":"red",children:r.userStatus===0?"\u6B63\u5E38":"\u7981\u7528"})}},{title:"\u7F16\u53F7",dataIndex:"planetCode",copyable:!0,editable:!1},{title:"\u89D2\u8272",dataIndex:"userRole",render:function(c,r){return(0,a.jsx)(j.Z,{color:r.userRole===1?"gold":"default",children:r.userRole===1?"\u7BA1\u7406\u5458":"\u666E\u901A\u7528\u6237"})},editable:h},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",valueType:"dateTime",sorter:!0},{title:"\u64CD\u4F5C",valueType:"option",render:function(c,r,U,D){var y=r.id===m,b=h||y,B=h||y,P=[];return P.push((0,a.jsx)(g.Z,{type:"link",icon:(0,a.jsx)(F.Z,{}),onClick:function(){f.default.info("\u67E5\u770B\u7528\u6237\u8BE6\u60C5\u529F\u80FD\u5F85\u5F00\u53D1")},children:"\u67E5\u770B"},"view")),b&&P.push((0,a.jsx)(g.Z,{type:"link",icon:(0,a.jsx)(k.Z,{}),onClick:function(){var s;D==null||(s=D.startEditable)===null||s===void 0||s.call(D,r.id)},children:"\u7F16\u8F91"},"edit")),B&&P.push((0,a.jsx)(g.Z,{type:"link",danger:!0,icon:(0,a.jsx)($.Z,{}),onClick:(0,T.Z)((0,E.Z)().mark(function R(){var s,l;return(0,E.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,M.h8)(r.id);case 3:s=e.sent,s&&s.code===1?(f.default.success("\u5220\u9664\u6210\u529F"),(l=actionRef.current)===null||l===void 0||l.reload()):f.default.error((s==null?void 0:s.msg)||"\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("\u5220\u9664\u7528\u6237\u5931\u8D25:",e.t0),f.default.error((e.t0===null||e.t0===void 0?void 0:e.t0.message)||"\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01");case 11:case"end":return e.stop()}},R,null,[[0,7]])})),children:"\u5220\u9664"},"delete")),P}}]};I.default=function(){var O=(0,C.useRef)(),h=(0,C.useState)(!1),m=(0,Z.Z)(h,2),v=m[0],c=m[1],r=(0,C.useState)(0),U=(0,Z.Z)(r,2),D=U[0],y=U[1],b=(0,C.useState)(!0),B=(0,Z.Z)(b,2),P=B[0],R=B[1];return(0,C.useEffect)(function(){var s=function(){var l=(0,T.Z)((0,E.Z)().mark(function u(){var e,d;return(0,E.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,M.ar)();case 3:e=n.sent,console.log("\u7528\u6237\u4FE1\u606F\u54CD\u5E94:",e),e&&e.code===1&&e.data?(console.log("\u7528\u6237\u89D2\u8272:",e.data.userRole),d=e.data.userRole===1,console.log("\u662F\u5426\u4E3A\u7BA1\u7406\u5458:",d),c(d),y(e.data.id)):(console.log("\u7528\u6237\u4FE1\u606F\u83B7\u53D6\u5931\u8D25:",e),c(!1)),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(0),console.error("\u83B7\u53D6\u7528\u6237\u4FE1\u606F\u5931\u8D25:",n.t0),c(!1);case 12:return n.prev=12,R(!1),n.finish(12);case 15:case"end":return n.stop()}},u,null,[[0,8,12,15]])}));return function(){return l.apply(this,arguments)}}();s()},[]),P?(0,a.jsx)("div",{children:"\u52A0\u8F7D\u4E2D..."}):(0,a.jsx)(L.ZP,{columns:x(v,D),actionRef:O,cardBordered:!0,request:(0,T.Z)((0,E.Z)().mark(function s(){var l,u,e,d,i,n=arguments;return(0,E.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return l=n.length>0&&n[0]!==void 0?n[0]:{},u=n.length>1?n[1]:void 0,e=n.length>2?n[2]:void 0,console.log(u,e),_.prev=4,_.next=7,(0,M.pz)();case 7:return i=_.sent,_.abrupt("return",{data:i.data||[],success:!0,total:((d=i.data)===null||d===void 0?void 0:d.length)||0});case 11:return _.prev=11,_.t0=_.catch(4),console.error("\u83B7\u53D6\u7528\u6237\u5217\u8868\u5931\u8D25:",_.t0),f.default.error("\u83B7\u53D6\u7528\u6237\u5217\u8868\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u6743\u9650"),_.abrupt("return",{data:[],success:!1,total:0});case 16:case"end":return _.stop()}},s,null,[[4,11]])})),editable:{type:"multiple",onSave:function(){var s=(0,T.Z)((0,E.Z)().mark(function u(e,d){var i,n,p,_;return(0,E.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(o.prev=0,console.log("\u4FDD\u5B58\u7528\u6237\u4FE1\u606F:",d),!v){o.next=9;break}return o.next=5,(0,M.Uy)({id:d.id,userRole:d.userRole});case 5:i=o.sent,i&&i.code===1?(f.default.success("\u4FDD\u5B58\u6210\u529F"),(n=O.current)===null||n===void 0||n.reload()):f.default.error((i==null?void 0:i.msg)||"\u4FDD\u5B58\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"),o.next=13;break;case 9:return o.next=11,(0,M.Uy)({id:d.id,username:d.username,avatarUrl:d.avatarUrl,gender:d.gender,phone:d.phone,email:d.email});case 11:p=o.sent,p&&p.code===1?(f.default.success("\u4FDD\u5B58\u6210\u529F"),(_=O.current)===null||_===void 0||_.reload()):f.default.error((p==null?void 0:p.msg)||"\u4FDD\u5B58\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01");case 13:o.next=19;break;case 15:o.prev=15,o.t0=o.catch(0),console.error("\u4FDD\u5B58\u7528\u6237\u4FE1\u606F\u5931\u8D25:",o.t0),f.default.error((o.t0===null||o.t0===void 0?void 0:o.t0.message)||"\u4FDD\u5B58\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01");case 19:case"end":return o.stop()}},u,null,[[0,15]])}));function l(u,e){return s.apply(this,arguments)}return l}()},columnsState:{persistenceKey:"user-manage-table",persistenceType:"localStorage"},rowKey:"id",search:{labelWidth:"auto",defaultCollapsed:!1,optionRender:function(l,u){var e=l.searchText,d=l.resetText,i=u.form;return[(0,a.jsx)(g.Z,{type:"primary",onClick:function(){i==null||i.submit()},children:e},"search"),(0,a.jsx)(g.Z,{onClick:function(){i==null||i.resetFields()},children:d},"reset")]}},form:{syncToUrl:function(l,u){return u==="get"?(0,A.Z)((0,A.Z)({},l),{},{created_at:[l.startTime,l.endTime]}):l}},pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:function(l,u){return"\u7B2C ".concat(u[0],"-").concat(u[1]," \u6761/\u603B\u5171 ").concat(l," \u6761")}},dateFormatter:"string",headerTitle:"\u7528\u6237\u7BA1\u7406",toolBarRender:function(){return[(0,a.jsx)(g.Z,{onClick:function(){var u;return(u=O.current)===null||u===void 0?void 0:u.reload()},children:"\u5237\u65B0"},"refresh")]},options:{setting:{listsHeight:400}}})}}}]);
